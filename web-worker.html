<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Worker</title>
</head>
<body>

    <button id="button">Click Me</button>

    <script>

        /*
            Thread di JavaScript

        -   JavaScript adalah Single Thread (Single Proses), artinya walaupun proses yang kita
            buat adalah Async, tapi tetap akan dijalankan dalam Thread (Proses) yang sama
        -   Kemampuan satu Thread dalam mengelola beberapa pekerjaan, dinamakan Concurrent
        -   Kemampuan menjalankan beberapa Thread untuk mengelola satu atau lebih pekerjaan,
            dinamakan pararel
        -   Dan untuk membuat proses secara pararel, kita bisa menggunakan Web Worker
        */

        //  Membuat Worker
        const worker = new Worker("worker.js");
        worker.addEventListener("message", function(message) {
            console.log(message.data);
        });

        document.getElementById("button").onclick = function () {
            worker.postMessage(80000);
        };

        /*
            Web Worker

        -   Web Worker adalah kemampuan untuk menjalankan proses di Thread yang berbeda
            dibanding main Thread
        -   Keuntungan menggunakan Web Worker adalah, jika terdapat proses yang membutuhkan
            waktu lama, Web kita tidak akan freeze, karena proses tersebut bisa kita jalankan
            di Thread yang berbeda dari main Thread (yang biasa digunakan oleh UI)
        -   https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API
        */

        /*
            Worker

        -   Untuk menggunakan Web Worker API, kita bisa membuat object Worker
        -   https://developer.mozilla.org/en-US/docs/Web/API/Worker
        -   Saat kita membuat object Worker, Worker tidak akan secara otomatis berjalan, melainkan
            kita perlu memberi perintah dengan cara mengirim pesan
        -   Untuk mengirim pesan, kita bisa gunakan method postMessage()
        -   Sedangkan untuk menerima balasan dari worker, kita bisa menggunakan eventListener
            onmessage
        -   Data yang diterima adalah object MessageEvent
        -   https://developer.mozilla.org/en-US/docs/Web/API/MessageEvent
        */

    </script>
    
</body>
</html>